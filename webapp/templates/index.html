{% extends "base.html" %}

{% block title %}Home - Weather Analysis{% endblock %}

{% block content %}
<style>
    .slideshow-container {
        position: relative;
        width: 100%;
        height: 500px;
        margin: 0 0 40px 0;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }
    
    .slide {
        display: none;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
    }
    
    .slide img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .slide.active {
        display: block;
        animation: fadeIn 1s;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    .overlay-text {
        position: absolute;
        bottom: 20px;
        left: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 20px;
        border-radius: 8px;
    }
    
    .overlay-text h2 {
        margin: 0 0 10px 0;
        color: white;
    }
    
    .overlay-text p {
        margin: 5px 0;
        font-size: 0.9em;
    }
</style>

<div class="slideshow-container">
    <div class="slide active">
        <img src="{{ url_for('static', filename='images/images.avif') }}" alt="Australia 1">
        <div class="overlay-text">
            <h2>Welcome to the Weather Analysis Application</h2>
            <p>A 3-tier web application analyzing Australian weather data</p>
        </div>
    </div>
    <div class="slide">
        <img src="{{ url_for('static', filename='images/images-7.avif') }}" alt="Australia 2">
        <div class="overlay-text">
            <h2>Tier 1: Presentation Layer</h2>
            <p>HTML templates • Jinja2 • CSS styling • Browser-based UI</p>
        </div>
    </div>
    <div class="slide">
        <img src="{{ url_for('static', filename='images/images-3.avif') }}" alt="Australia 3">
        <div class="overlay-text">
            <h2>Tier 2: Business Logic</h2>
            <p>Flask web framework • Route handlers • Data processing</p>
        </div>
    </div>
    <div class="slide">
        <img src="{{ url_for('static', filename='images/images-4.avif') }}" alt="Australia 4">
        <div class="overlay-text">
            <h2>Tier 3: Data Layer</h2>
            <p>SQLite database • SQLAlchemy ORM • {{ stats['total_records'] if stats else 0 }} weather records</p>
        </div>
    </div>
    <div class="slide">
        <img src="{{ url_for('static', filename='images/images-9.avif') }}" alt="Australia 5">
        <div class="overlay-text">
            <h2>Interactive Features</h2>
            <p>Statistics • Filtering • Visualizations • User Query Tracking</p>
        </div>
    </div>
    <div class="slide">
        <img src="{{ url_for('static', filename='images/images-6.avif') }}" alt="Australia 6">
        <div class="overlay-text">
            <h2>Explore the Application</h2>
            <p>Navigate using the menu above to see statistics, filter data, and view visualizations</p>
        </div>
    </div>
</div>

<script>
    let slideIndex = 0;
    const slides = document.querySelectorAll('.slide');
    
    function showSlides() {
        slides.forEach(slide => slide.classList.remove('active'));
        slideIndex++;
        if (slideIndex > slides.length) {
            slideIndex = 1;
        }
        slides[slideIndex - 1].classList.add('active');
        setTimeout(showSlides, 4000); // Change image every 4 seconds
    }
    
    showSlides();
</script>

{% if stats %}
<h2 style="margin-top: 40px;">Quick Statistics</h2>
<div class="stats-grid">
    <div class="stat-card">
        <h3>Total Records</h3>
        <div class="value">{{ stats['total_records'] }}</div>
    </div>
    <div class="stat-card">
        <h3>Avg Max Temp</h3>
        <div class="value">{{ "%.1f"|format(stats['avg_max_temp']) }}°C</div>
    </div>
    <div class="stat-card">
        <h3>Avg Min Temp</h3>
        <div class="value">{{ "%.1f"|format(stats['avg_min_temp']) }}°C</div>
    </div>
    <div class="stat-card">
        <h3>Total Rainfall</h3>
        <div class="value">{{ "%.0f"|format(stats['total_rainfall']) }}mm</div>
    </div>
</div>
{% endif %}

<div style="text-align: center; margin-top: 40px;">
    <a href="/statistics" class="btn">View Detailed Statistics →</a>
</div>
{% endblock %}